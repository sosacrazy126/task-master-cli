*   **Purpose:** This codebase provides a CLI tool (`task-master`) to initialize and manage software development projects. It leverages AI services (Anthropic Claude, Perplexity) to break down Product Requirement Documents (PRDs), analyze task complexity, generate tasks/subtasks, and provide research-backed implementation guidance.
*   **Core Files:**
    *   `index.js`: The main package entry point, exporting functions and potentially handling CLI command routing.
    *   `scripts/init.js`: Handles the interactive project initialization (`task-master init`), setting up directories and template files (`package.json`, `.env.example`, `.gitignore`, `.cursor/rules`, `.windsurfrules`).
    *   `scripts/modules/task-manager.js`: Contains the core logic for managing tasks: parsing PRDs, listing/updating tasks, expanding tasks into subtasks, analyzing complexity, and adding/removing tasks/subtasks.
    *   `scripts/modules/ai-services.js`: Abstracts interactions with different AI providers (Anthropic, Perplexity via OpenAI compatibility), handling API calls (including streaming), prompt generation, and response parsing for task generation and analysis.
    *   `scripts/modules/utils.js`: Provides shared utility functions for logging, configuration management (via `CONFIG` object and environment variables), JSON file I/O, string manipulation (like `toKebabCase`), and task/dependency helper functions.
*   **Initialization Flow:** The `task-master init` command (run via `bin/task-master-init.js` which loads `scripts/init.js`) prompts the user for project details (or uses CLI flags), creates a standard project structure (`tasks/`, `scripts/`, `.cursor/rules/`), copies template configuration files, sets up `package.json` with necessary dependencies and scripts, and runs `npm install`.
*   **Task Management & AI Data Flow:** Tasks are stored primarily in `tasks/tasks.json`. Commands like `parse-prd`, `expand`, `analyze-complexity`, `add-task` (invoked via `dev.js` or Cursor Agent prompts) trigger functions in `task-manager.js`. These functions often use `ai-services.js` to construct prompts (incorporating existing task data or PRD content), call AI APIs, receive responses (often streamed), parse the JSON results, and update `tasks/tasks.json`. Task files (`tasks/task_NNN.txt`) are generated based on the JSON data.
*   **Data & Configuration:** Task data is structured JSON (`tasks/tasks.json`). Complexity analysis results are stored in `scripts/task-complexity-report.json`. Configuration (API keys, model names, temperature, etc.) is primarily managed via environment variables loaded by `dotenv` from `.env` (based on `.env.example`) and accessed through the `CONFIG` object in `utils.js`. Shared logic resides in `scripts/modules/`.
*   **Purpose:** Provides a CLI tool (`task-master`) for AI-assisted software project initialization and task management. It uses AI (Claude, Perplexity) to parse Product Requirement Documents (PRDs), generate/expand tasks, analyze complexity, and provide implementation guidance.
*   **Core Files & Entry Points:**
    *   `bin/task-master.js`: Main CLI entry point. Parses arguments, validates flags (kebab-case), and spawns `scripts/dev.js` for most commands.
    *   `bin/task-master-init.js`: Specific entry point for the `init` command, spawns `scripts/init.js`.
    *   `scripts/init.js`: Handles interactive project initialization logic (directory setup, template copying, `npm install`).
    *   `scripts/dev.js`: Entry point for development/task commands, imports and runs the CLI logic from `scripts/modules/commands.js`.
    *   `scripts/modules/commands.js`: Defines CLI commands using `commander`, parsing options and calling appropriate manager functions.
    *   `scripts/modules/task-manager.js`: Core logic for managing tasks (CRUD, AI interactions for expansion/analysis, file generation).
    *   `scripts/modules/ai-services.js`: Abstracts AI provider interactions (Claude, Perplexity) including prompt construction and response parsing.
    *   `scripts/modules/utils.js`: Shared utilities (logging, file I/O, config access via `CONFIG` object).
    *   `scripts/modules/ui.js`: Handles console UI elements (banners, tables, progress indicators).
    *   `scripts/modules/dependency-manager.js`: Functions for validating and managing task dependencies.
*   **Initialization (`init`) Flow:** User runs `task-master init`. `bin/task-master-init.js` executes `scripts/init.js`. `init.js` uses `commander` to parse options (like `-y`, `--name`), prompts user (if needed), creates directories (`tasks/`, `scripts/`, `.cursor/rules/`), copies/merges template files (`package.json`, `.env.example`, `.gitignore`, `.windsurfrules`, Cursor `.mdc` files), and runs `npm install`.
*   **Task Management (`dev` commands) Flow:** User runs commands like `task-master list` or `task-master expand`. `bin/task-master.js` validates flags and executes `scripts/dev.js` with args. `dev.js` runs `scripts/modules/commands.js`'s `runCLI`. `commands.js` parses the specific command (e.g., `expand`), validates options, and calls the corresponding function in `task-manager.js` (e.g., `expandTask`). `task-manager.js` performs the action, often calling `ai-services.js` for AI calls, reads/writes `tasks/tasks.json`, and might generate/update `tasks/task_NNN.txt` files.
*   **Data & Configuration:** Primary task data is stored in `tasks/tasks.json`. Individual task details are generated into `tasks/task_NNN.txt` files. AI analysis results are in `scripts/task-complexity-report.json`. Configuration (API keys, models, logging levels) is loaded via `dotenv` from `.env` (based on `.env.example`) and accessed globally via the `CONFIG` object exported from `scripts/modules/utils.js`. `.gitignore` tracks ignored files. `package.json` manages dependencies and scripts. Cursor/Windsurf rules are stored in `.cursor/rules/` and `.windsurfrules`.
